<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8>
  <link rel=stylesheet href=./styles/index.css>
  <title>GroceryList</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue-resource@1.4.0"></script>

</head>
<body>

  <section class="head">
    Grocery List of User {{res}} {{req}}
  </section>
  <div class="list">

  </div>
  <div id="itemList">
    <div v-for="itm in items">
      <span>{{itm}}</span><button v-on:click="itemDell">Remove</button><br/>
    </div>
    <button v-on:click="counter += 1">+1</button>
    <input type="text" v-model="item" />
    <button v-on:click="itemAdd">add</button>
    <p>Кнопка выше была нажата {{counter}} раз</p>
  </div>
</body>


<script>
var appCl = new Vue({
  el: '#itemList',
  data: {
    counter: 0,
    items : [],
    item: '',
    req:'',
    res:{}
  },

  mounted () {
    this.$http.get('/session').then(response => {
      console.log(this);
      console.log(response.body);
      this.items = response.body;
    }, response => {
      console.log('error !!!');
      // error callback
    });

  },

  methods: {

    itemAdd: function () {
      console.log(this.item);
      this.$http.get('/add?item='+this.item).then(response => {
        console.log(this);
        console.log(response.body);
        this.item ='';
        this.items = response.body;
      }, response => {
        console.log('error !!!');
        // error callback
      });

    },
    itemDell: function (){
        console.log(this);
    },
    deconnect: function (){
      this.$http.get('/session').then(
        response => {
          alert('session deleted');

        },responseOnError => {
          alert('error deconnection')

        })
      }
    }
  });

</script>


<script src=./scripts/index.js></script>

</html>
